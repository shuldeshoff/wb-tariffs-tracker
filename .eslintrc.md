# ESLint Конфигурация

## Описание

Проект использует **ESLint 9** с новым **flat config** форматом (`eslint.config.js`).

## Установленные плагины

- **@typescript-eslint/eslint-plugin** - TypeScript правила
- **eslint-plugin-prettier** - интеграция Prettier
- **eslint-plugin-jsdoc** - проверка JSDoc комментариев
- **eslint-plugin-unused-imports** - автоматическое удаление неиспользуемых импортов

## Конфигурация

### Файлы

- `eslint.config.js` - основная конфигурация (flat config формат)
- `.prettierrc.json` - настройки форматирования Prettier

### Игнорируемые файлы

Настроены в `eslint.config.js` через `ignores`:
- `node_modules/`
- `dist/`
- `coverage/`
- `logs/`
- `*.js` файлы в корне (скомпилированные)

### Правила

#### Основные
- **TypeScript strict mode** - включен
- **Prettier** - автоматическое форматирование
- **No explicit any** - warning (разрешен в тестах)
- **Unused imports** - автоматически удаляются

#### Code Quality
- `eqeqeq: 'always'` - всегда используй ===
- `no-var: 'error'` - используй const/let
- `prefer-const: 'error'` - предпочитай const
- `no-console: 'off'` - разрешен (используем logger)

#### TypeScript
- Отдельная конфигурация для `src/` (с project) и `tests/` (без project)
- Все типы явно описаны

## Команды

```bash
# Проверка кода
npm run lint

# Автофикс
npm run lint:fix

# Строгая проверка (для CI)
npm run lint:check
```

## Результаты

Текущие метрики:
- ✅ 0 ошибок
- ⚠️ 13 предупреждений (не критичны):
  - 12 x `@typescript-eslint/no-explicit-any` - использование `any` для error handling
  - 1 x `no-return-await` - избыточный await
  - 1 x `require-await` - async без await

## CI/CD Integration

Для CI/CD pipeline используй:

```yaml
- name: Lint
  run: npm run lint:check
```

Это завершится с ошибкой, если есть warnings или errors.

## Настройка IDE

### VS Code

Установи расширения:
- ESLint (`dbaeumer.vscode-eslint`)
- Prettier (`esbenp.prettier-vscode`)

Настройки (`.vscode/settings.json`):
```json
{
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "eslint.validate": [
    "javascript",
    "typescript"
  ]
}
```

### Cursor

Расширения работают из коробки. Убедись что:
- Auto-save включен
- Format on save включен

## Расширение правил

Чтобы добавить новые правила, отредактируй `eslint.config.js`:

```javascript
rules: {
  // Твое правило
  'no-console': 'error',
}
```

## Troubleshooting

### Ошибка "Parser error"
- Проверь что файл включен в `tsconfig.json`
- Для тестов используется отдельная конфигурация без `project`

### Конфликт Prettier/ESLint
- Убедись что `eslint-config-prettier` последний в конфиге
- Он отключает конфликтующие правила

### Медленная работа
- Проверь `ignores` - убедись что не сканируешь `node_modules`
- Используй `--cache` флаг для ESLint (в CI)

